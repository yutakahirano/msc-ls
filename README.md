# Efficient Magic State Cultivation with Lattice Surgery

This repository contains the code used in the paper  
["Efficient Magic State Cultivation with Lattice Surgery" (arXiv:2510.24615)](https://arxiv.org/abs/2510.24615).

The code used to generate the figures in the paper is available in the branch [`experiment-2025-sep`](https://github.com/yutakahirano/msc-ls/tree/experiment-2025-sep).

The implementation is written in Python and depends on:
- [Stim](https://github.com/quantumlib/Stim)
- [PyMatching](https://github.com/oscarhiggott/PyMatching)
- SQLite3
- NumPy
- Matplotlib

---

### Directory Structure

The `src/` directory contains the main scripts:

- **`src/lattice_surgery_complementary_gap.py`**  
  The main script that implements the end-to-end distillation sequence.

- **`src/lattice_surgery_error_detection.py`**  
  Supports the error detection use case.  
  Used to generate the data for *Fig. 9*, “Logical X and Z error probabilities introduced by the lattice surgery procedure,” in the paper.

- **`src/extract_lookup_table.py`**  
  Extracts information from the lookup table generated by `lattice_surgery_complementary_gap.py`.  
  Used to generate the data for *Fig. 11*, “Coverage of the lookup table,” in the paper.

---

### Version Requirements

- `src/lattice_surgery_error_detection.py` requires **Sinter version ≤ 1.13** due to [a known bug](https://github.com/quantumlib/Stim/issues/887).  
- Other scripts require **Stim 1.15** or later.
